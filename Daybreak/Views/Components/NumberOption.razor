<div style="border: 1px solid var(--neutral-stroke-rest); border-radius: 6px; padding: 0.75rem; background: var(--neutral-fill-rest); display: flex; align-items: center; justify-content: space-between;">
    <div style="flex: 1; margin-right: 1rem;">
        <div style="font-weight: 600; color: var(--neutral-foreground-rest); margin-bottom: 0.25rem;">@this.Name</div>
        <div style="color: var(--neutral-foreground-hint); font-size: 0.85rem; line-height: 1.3;">@this.Description</div>
    </div>
    <div style="flex-shrink: 0;">
        <FluentNumberField @bind-Value="this.Value" 
                          @onchange="OnValueChanged"
                          style="width: 180px;" 
                          Placeholder="Enter a number" />
    </div>
</div>

@inherits OptionBase<double>
@code {
    public override double ConvertValue(OptionInstance optionInstance, OptionProperty property)
    {
        var numberValue = property.Getter(optionInstance);
        if (numberValue is null)
        {
            return 0.0;
        }

        var value = numberValue switch
        {
            double var => var,
            IConvertible convertible => convertible.ToDouble(null),
            _ => 0.0
        };
        return value;
    }

    private void OnValueChanged(ChangeEventArgs e)
    {
        if (double.TryParse(e.Value?.ToString(), out var newValue))
        {
            this.Value = newValue;
            
            // Convert back to the original property type
            var convertedValue = this.Property.Type switch
            {
                Type t when t == typeof(int) => (int)newValue,
                Type t when t == typeof(uint) => (uint)newValue,
                Type t when t == typeof(long) => (long)newValue,
                Type t when t == typeof(ulong) => (ulong)newValue,
                Type t when t == typeof(short) => (short)newValue,
                Type t when t == typeof(ushort) => (ushort)newValue,
                Type t when t == typeof(float) => (float)newValue,
                Type t when t == typeof(double) => newValue,
                _ => newValue
            };
            
            this.Property.Setter(this.Instance, convertedValue);
        }
    }
}
