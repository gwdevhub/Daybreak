<div class="wiki-container">
    <nav class="wiki-toc backdrop-panel">
        <h3>Contents</h3>
        <ul>
            @foreach (var p in this.ViewModel.Pages)
            {
                <li class="@(p == this.ViewModel.CurrentPage ? "active" : "")">
                    <a href="/wiki/@p">@p</a>
                </li>
            }
        </ul>
    </nav>
    <div id="wiki-content" class="wiki-content backdrop-panel"></div>
</div>

@page "/wiki/{Page}"
@inherits ViewBase<WikiView, WikiViewModel>
@inject IJSRuntime JSRuntime

@code {
    [Parameter]
    public string? Page { get; set; }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        var filePath = $"wiki/{this.Page}.md";
        await this.JSRuntime.InvokeVoidAsync("wikiRenderer.render", filePath, "wiki-content");
    }
}
